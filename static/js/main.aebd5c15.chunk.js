(this["webpackJsonpscoober-game-client"]=this["webpackJsonpscoober-game-client"]||[]).push([[0],{117:function(e,t,n){},123:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(18),o=n.n(r),c=n(67),s=(n(117),n(41)),l=n(21),u=n(6),f=n(25),d=Object(f.b)({name:"api",initialState:{isConnected:!1},reducers:{connected:function(e){return Object(u.a)(Object(u.a)({},e),{},{isConnected:!0})},disconnected:function(e){return Object(u.a)(Object(u.a)({},e),{},{isConnected:!1})}}}),m=d.actions,b=m.connected,j=m.disconnected,p=function(e){return e.api},g=d.reducer,x="".concat(Date.now()),h=Object(f.b)({name:"game",initialState:{selfId:x,selfImg:"player.png",opponentImg:"opponent.png",isStarted:!1,isSubmitting:!1,attempts:[]},reducers:{startGame:function(e,t){var n=t.payload,a=n.attempts.map((function(t){return t.user.id===e.selfId?Object(u.a)(Object(u.a)({},t),{},{user:Object(u.a)(Object(u.a)({},t.user),{},{profileImg:e.selfImg,isSelf:!0})}):Object(u.a)(Object(u.a)({},t),{},{user:Object(u.a)(Object(u.a)({},t.user),{},{profileImg:e.opponentImg,isSelf:!1})})}));return Object(u.a)(Object(u.a)(Object(u.a)({},e),n),{},{attempts:a,isStarted:!0,isSubmitting:!1})},submitAttempt:function(e){return Object(u.a)(Object(u.a)({},e),{},{isSubmitting:!0})}}}),O=h.actions,v=O.startGame,y=O.submitAttempt,w=function(e){return e.game},C=function(e){var t=e.game;return t.isStarted&&!t.winner&&!t.isRoomFull},I=function(e){var t=e.game;return t.isStarted&&t.turn===t.selfId&&!t.isSubmitting},N=h.reducer,S=n(35),k=n(141),T=n(2),D=Object(k.a)((function(e){return{avatar:{position:"relative",padding:"0 20px"},avatarImage:{position:"relative",display:"block","z-index":"10"},out:{height:"52px",top:"-3px",left:"3px"},in:{width:"60px"}}})),R=function(e){var t=e.username,n=e.profileImg,a=e.variant,i=D();return Object(T.jsx)("div",{className:i.avatar,children:Object(T.jsx)("img",{className:"".concat(i.avatarImage," ").concat(i[null!==a&&void 0!==a?a:"out"]),src:"/scoober-game/".concat(n),alt:t,"aria-label":t})})};R.defaultProps={variant:"out",username:"",profileImg:"../img/avatar.png"};var B=R,P=n(125),G=Object(k.a)((function(e){return{root:{display:"flex"},left:{flexDirection:"row",justifyContent:"flex-start"},right:{flexDirection:"row-reverse",justifyContent:"flex-end"},attemptDetails:{flexShrink:0,flexGrow:1,justifyContent:"center",display:"flex",flexDirection:"column"},detailsLeft:{justifyContent:"flex-start",alignItems:"flex-start"},detailsRight:{justifyContent:"flex-end",alignItems:"flex-end"},selectedNumber:{width:"50px",height:"50px",borderRadius:"30px",backgroundColor:"#ff5722",alignItems:"center",display:"flex",justifyContent:"center"},labelText:{marginTop:"5px",padding:"5px",alignItems:"center",display:"flex",backgroundColor:"#ffffff",border:"2px solid #3d5afe"}}})),A=function(e){var t=e.user,n=e.number,a=e.text,i=e.newValue,r=G(),o=t.isSelf?"left":"right",c=t.isSelf?"out":"in",s=t.isSelf?"detailsLeft":"detailsRight";return Object(T.jsxs)("div",{className:"".concat(r.root," ").concat(r[o]),children:[Object(T.jsx)(B,{profileImg:t.profileImg,variant:c,username:t.username}),Object(T.jsxs)("div",{className:"".concat(r.attemptDetails," ").concat(r[s]),children:[Object(T.jsx)(P.a,{variant:"h5",component:"h6",className:r.selectedNumber,children:n}),Object(T.jsx)(P.a,{variant:"h6",component:"h6",className:r.labelText,children:a}),Object(T.jsx)(P.a,{variant:"h6",component:"h6",className:r.labelText,children:i})]})]})};var E=n(146),W=n(143),z=n(147),F=n(148),L=n(144),M=n(145),U=function(e){var t=e%3;return 0===t?0:1===t?-1:1},V=Object(k.a)((function(e){return{root:{marginTop:"10px",backgroundColor:"#2196f3",paddingBottom:"280px",paddingTop:"90px",width:"100%",height:"100%"},startNumberContainer:{marginTop:"10px",width:"100%",alignItems:"center",display:"flex",justifyContent:"center"},startingNumber:{width:"100px",height:"60px",borderRadius:"30px",backgroundColor:"#ff5722",alignItems:"center",display:"flex",justifyContent:"center"},bottomBox:{flexDirection:"column",justifyContent:"center",alignItems:"center","& > *":{margin:e.spacing(1)},position:"fixed",bottom:0,width:"100%",backgroundColor:"#4dabf5","z-index":"100"},toggleButton:{marginLeft:"10px",color:"#ffffff"},button:{padding:5,width:"40px",height:"40px",borderRadius:"40px",minHeight:0,minWidth:0,alignItems:"center",justifyContent:"center",backgroundColor:"#f50057",margin:10,fontSize:"16px",fontWeight:"bold",color:"#ffffff"},alertStyle:{justifyContent:"center",width:"80%"}}})),Y=function(){var e=Object(a.useRef)();return Object(a.useEffect)((function(){return e.current.scrollIntoView({behavior:"smooth"})})),Object(T.jsx)("div",{ref:e})},J=function(e){var t=e.startingNumber,n=e.handleAttempt,r=e.attempts,o=e.canSubmit,c=e.onLeftGame,l=Object(s.a)(e,["startingNumber","handleAttempt","attempts","canSubmit","onLeftGame"]),f=V(),d=i.a.useState(!1),m=Object(S.a)(d,2),b=m[0],j=m[1],p=function(e,t){var n=Object(a.useState)(e),i=Object(S.a)(n,2),r=i[0],o=i[1],c=Object(a.useState)(!1),s=Object(S.a)(c,2),l=s[0],u=s[1],f=Object(a.useRef)(null),d=Object(a.useCallback)((function(){if(null===f.current){var n=Date.now(),a=e;u(!1),f.current=setInterval((function(){var e=Math.round((Date.now()-n)/1e3);o(a-e),Number(e)>=Number(a)&&(m(),u(!0))}),t)}}),[]),m=Object(a.useCallback)((function(){null!==f.current&&(clearInterval(f.current),f.current=null)}),[]),b=Object(a.useCallback)((function(){u(!1),o(e),m(),d()}),[]);return{count:r,start:d,stop:m,reset:b,finished:l}}(30,1e3),g=p.count,x=p.start,h=p.stop,O=p.reset,v=p.finished;Object(a.useEffect)((function(){return o&&x(),function(){h()}}),[o]),Object(a.useEffect)((function(){v&&c()}),[v]),Object(a.useEffect)((function(){if(!l.otherProps.isSingleUser&&b&&o){var e=function(e,t){var n=t.length;return U(n>0?t[n-1].newValue:e)}(t,r);setTimeout((function(){n(e)}),1e3)}}),[b,o,r]);var y=function(e){n(e),O()};return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:f.root,children:[Object(T.jsx)("div",{className:f.startNumberContainer,children:Object(T.jsx)(P.a,{variant:"h5",component:"h6",className:f.startingNumber,children:t})}),r.map((function(e,t){return Object(a.createElement)(A,Object(u.a)(Object(u.a)({},e),{},{key:t}))})),Object(T.jsx)(Y,{})]}),Object(T.jsxs)(E.a,{justifyContent:"center",display:"flex",className:f.bottomBox,children:[function(){var e=l.otherProps,t=e.isSingleUser,n=e.playerTwo,a=e.turn,i=null;return t||o||n||a?o?i="Your turn end in ".concat(g," seconds"):o||(i="Waiting opponent's turn..."):i="Please wait until another player start!",Object(T.jsx)(z.a,{severity:"info",variant:"filled",color:"warning",className:f.alertStyle,children:i})}(),Object(T.jsxs)(E.a,{flexDirection:"row",justifyContent:"center",display:"flex",alignItems:"center",children:[Object(T.jsx)(W.a,{variant:"contained",className:f.button,disabled:!o||b,onClick:function(){return y(-1)},children:"-1"}),Object(T.jsx)(W.a,{variant:"contained",className:f.button,disabled:!o||b,onClick:function(){return y(0)},children:"0"}),Object(T.jsx)(W.a,{variant:"contained",className:f.button,disabled:!o||b,onClick:function(){return y(1)},children:"1"}),!l.otherProps.isSingleUser&&Object(T.jsx)(L.a,{children:Object(T.jsx)(M.a,{className:f.toggleButton,control:Object(T.jsx)(F.a,{checked:b,onChange:function(){j((function(e){return!e})),O()},color:"primary","data-testid":"automate-toggle"}),label:"Automate"})})]})]})]})};J.defaultProps={attempts:[],otherProps:{}};var H=J,$=n.p+"static/media/you-lost.380ad99a.png",q=n.p+"static/media/win.2b97f362.png",K=Object(k.a)((function(e){return{root:{display:"flex",flexDirection:"column",height:"60%"},imageContainer:{height:"100%",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"contain",backgroundOrigin:"contentBox"},lostImage:{backgroundImage:"url(".concat($,")")},winImage:{backgroundImage:"url(".concat(q,")")},winMessageStyle:{marginTop:"10px",color:"#8bc34a"},loseMessageStyle:{marginTop:"10px",color:"#f44336"}}})),Q=function(e){var t=e.winner,n=e.selfId,a=K(),i=t===n?"You won":"You lost",r=t===n?"winMessageStyle":"loseMessageStyle",o=t===n?"winImage":"lostImage";return Object(T.jsxs)("div",{className:a.root,"data-testid":"summary-component",children:[Object(T.jsx)("div",{className:"".concat(a.imageContainer," ").concat(a[o])}),Object(T.jsx)(P.a,{variant:"h3",component:"h4",className:"".concat(a[r]),children:i})]})},X=Object(k.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",height:"100%",paddingTop:"100px"},buttonBox:{marginTop:"10px","& > *":{margin:e.spacing(1)}},title:{margingTop:"10px",color:"#ffffff"},alertStyle:{margin:"10px",justifyContent:"center"},button:{color:"#ffffff",borderColor:"#ffffff"},loading:{color:"#ff0000"}}})),Z=function(e){var t=e.selfId,n=e.winner,a=e.initGame,i=e.isConnected,r=e.isRoomFull,o=X();return Object(T.jsxs)("div",{className:o.root,children:[!!n&&Object(T.jsx)(Q,{selfId:t,winner:n}),!i&&Object(T.jsx)(P.a,{variant:"h5",component:"h6",className:o.loading,children:"Server is not not connected..."}),r&&Object(T.jsx)(z.a,{severity:"info",variant:"filled",color:"warning",className:o.alertStyle,children:"Room is full. Please try after some time!"}),Object(T.jsx)(P.a,{variant:"h5",component:"h6",color:"primary",className:o.title,children:"Choose your opponent"}),Object(T.jsxs)(E.a,{justifyContent:"center",display:"flex",className:o.buttonBox,children:[Object(T.jsx)(W.a,{disabled:!i,variant:"outlined",className:o.button,onClick:function(){return a(!0)},children:"Computer"}),Object(T.jsx)(W.a,{disabled:!i,variant:"outlined",className:o.button,onClick:function(){return a(!1)},children:"Player"})]})]})},_=Object(k.a)((function(e){return{root:{display:"flex",width:"100%",position:"fixed",top:0,backgroundColor:"#2196f3",boxShadow:"0 8px 6px -6px black",paddingTop:e.spacing(1),paddingBottom:e.spacing(1),"& > *":{margin:e.spacing(1)},"z-index":100},title:{color:"#ffffff"}}})),ee=function(e){var t=e.profileImg,n=_();return Object(T.jsx)("header",{className:n.root,children:Object(T.jsxs)(E.a,{display:"flex",children:[Object(T.jsx)(B,{profileImg:t}),Object(T.jsxs)(E.a,{justifyContent:"center",flexDirection:"column",display:"flex",children:[Object(T.jsx)(P.a,{variant:"h6",component:"h6",className:n.title,children:"Scoober Game"}),Object(T.jsx)(P.a,{variant:"subtitle1",className:n.title,children:"Win the game or win the job"})]})]})})},te=Object(k.a)((function(e){return{root:{height:"100vh",backgroundColor:"#2196f3",minWidth:"320px",boxSizing:"border-box"}}})),ne=function(){var e=te(),t=Object(l.b)(),n=Object(l.c)(w),i=n.id,r=n.selfId,o=n.startingNumber,c=n.winner,u=n.attempts,f=n.isRoomFull,d=n.selfImg,m=Object(s.a)(n,["id","selfId","startingNumber","winner","attempts","isRoomFull","selfImg"]),g=Object(l.c)(p).isConnected,x=Object(l.c)(C),h=Object(l.c)(I);Object(a.useEffect)((function(){t((function(e,t){e.on("connect",(function(){return t(b())}))})),t((function(e,t){e.on("disconnect",(function(){return t(j())}))})),t((function(e,t){e.on("game",(function(e){t(v(e))}))}))}),[t]);var O=function(e){return t((n={user:{id:r},isSingleUser:e},function(e){e.emit("newgame",n)}));var n},N=function(e){var n;h&&t((n={gameId:i,user:{id:r},number:e},function(e,t){t(y()),e.emit("turn",n)}))},S=function(){t((function(e){e.emit("left")}))};return Object(T.jsxs)(E.a,{height:"100vh",display:"flex",flexDirection:"column",className:e.root,children:[Object(T.jsx)(ee,{profileImg:d}),x?Object(T.jsx)(H,{handleAttempt:N,startingNumber:o,attempts:u,canSubmit:h,onLeftGame:S,otherProps:m}):Object(T.jsx)(Z,{initGame:O,isConnected:g,selfId:r,winner:c,isRoomFull:f})]})},ae=n(73);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ie=function(e){var t=[function(e){return function(t){var n=t.dispatch,a=t.getState;return function(t){return function(i){if("function"!==typeof i)return t(i);i(e,n,a)}}}}(e)].concat(Object(ae.a)(Object(f.c)()));return Object(f.a)({reducer:{game:N,api:g},middleware:t})}(Object(c.io)("http://localhost:5001"));o.a.render(Object(T.jsx)(i.a.StrictMode,{children:Object(T.jsx)(l.a,{store:ie,children:Object(T.jsx)(ne,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[123,1,2]]]);
//# sourceMappingURL=main.aebd5c15.chunk.js.map